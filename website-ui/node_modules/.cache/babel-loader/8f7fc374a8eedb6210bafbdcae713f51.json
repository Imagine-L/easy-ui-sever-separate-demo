{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport store from \"@/store\";\nexport default {\n  hasRole: {\n    mounted(el, binding) {\n      const {\n        value\n      } = binding; // const roles = store.getters && store.getters.roles\n\n      const roles = ['admin'];\n      console.log(roles);\n\n      if (value && value instanceof Array && value.length > 0) {\n        const hasPermissions = roles.some(permission => {\n          return value.includes(permission);\n        });\n\n        if (!hasPermissions) {\n          // 移除掉当前的element\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else {\n        throw new Error(`请设置操作权限标签值`);\n      }\n    }\n\n  },\n  hasPermission: {\n    mounted(el, binding) {\n      const {\n        value\n      } = binding;\n      const all_permission = \"*:*:*\";\n      const permissions = store.getters && store.getters.permissions;\n\n      if (value && value instanceof Array && value.length > 0) {\n        const hasPermissions = permissions.some(permission => {\n          return all_permission === permission || value.includes(permission);\n        });\n\n        if (!hasPermissions) {\n          // 移除掉当前的element\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else {\n        throw new Error(`请设置操作权限标签值`);\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/directive/index.js"],"names":["store","hasRole","mounted","el","binding","value","roles","console","log","Array","length","hasPermissions","some","permission","includes","parentNode","removeChild","Error","hasPermission","all_permission","permissions","getters"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACXC,EAAAA,OAAO,EAAE;AACLC,IAAAA,OAAO,CAACC,EAAD,EAAKC,OAAL,EAAc;AACjB,YAAM;AAACC,QAAAA;AAAD,UAAUD,OAAhB,CADiB,CAEjB;;AACA,YAAME,KAAK,GAAG,CAAC,OAAD,CAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;;AACA,UAAID,KAAK,IAAIA,KAAK,YAAYI,KAA1B,IAAmCJ,KAAK,CAACK,MAAN,GAAe,CAAtD,EAAyD;AACrD,cAAMC,cAAc,GAAGL,KAAK,CAACM,IAAN,CAAWC,UAAU,IAAI;AAC5C,iBAAOR,KAAK,CAACS,QAAN,CAAeD,UAAf,CAAP;AACH,SAFsB,CAAvB;;AAGA,YAAI,CAACF,cAAL,EAAqB;AACjB;AACAR,UAAAA,EAAE,CAACY,UAAH,IAAiBZ,EAAE,CAACY,UAAH,CAAcC,WAAd,CAA0Bb,EAA1B,CAAjB;AACH;AACJ,OARD,MAQO;AACH,cAAM,IAAIc,KAAJ,CAAW,YAAX,CAAN;AACH;AACJ;;AAjBI,GADE;AAoBXC,EAAAA,aAAa,EAAE;AACXhB,IAAAA,OAAO,CAACC,EAAD,EAAKC,OAAL,EAAc;AACjB,YAAM;AAACC,QAAAA;AAAD,UAAUD,OAAhB;AACA,YAAMe,cAAc,GAAG,OAAvB;AACA,YAAMC,WAAW,GAAGpB,KAAK,CAACqB,OAAN,IAAiBrB,KAAK,CAACqB,OAAN,CAAcD,WAAnD;;AACA,UAAIf,KAAK,IAAIA,KAAK,YAAYI,KAA1B,IAAmCJ,KAAK,CAACK,MAAN,GAAe,CAAtD,EAAyD;AACrD,cAAMC,cAAc,GAAGS,WAAW,CAACR,IAAZ,CAAiBC,UAAU,IAAI;AAClD,iBAAOM,cAAc,KAAKN,UAAnB,IAAiCR,KAAK,CAACS,QAAN,CAAeD,UAAf,CAAxC;AACH,SAFsB,CAAvB;;AAGA,YAAI,CAACF,cAAL,EAAqB;AACjB;AACAR,UAAAA,EAAE,CAACY,UAAH,IAAiBZ,EAAE,CAACY,UAAH,CAAcC,WAAd,CAA0Bb,EAA1B,CAAjB;AACH;AACJ,OARD,MAQO;AACH,cAAM,IAAIc,KAAJ,CAAW,YAAX,CAAN;AACH;AACJ;;AAhBU;AApBJ,CAAf","sourcesContent":["import store from \"@/store\";\r\n\r\nexport default {\r\n    hasRole: {\r\n        mounted(el, binding) {\r\n            const {value} = binding\r\n            // const roles = store.getters && store.getters.roles\r\n            const roles = ['admin']\r\n            console.log(roles)\r\n            if (value && value instanceof Array && value.length > 0) {\r\n                const hasPermissions = roles.some(permission => {\r\n                    return value.includes(permission)\r\n                })\r\n                if (!hasPermissions) {\r\n                    // 移除掉当前的element\r\n                    el.parentNode && el.parentNode.removeChild(el)\r\n                }\r\n            } else {\r\n                throw new Error(`请设置操作权限标签值`)\r\n            }\r\n        }\r\n    },\r\n    hasPermission: {\r\n        mounted(el, binding) {\r\n            const {value} = binding\r\n            const all_permission = \"*:*:*\";\r\n            const permissions = store.getters && store.getters.permissions\r\n            if (value && value instanceof Array && value.length > 0) {\r\n                const hasPermissions = permissions.some(permission => {\r\n                    return all_permission === permission || value.includes(permission)\r\n                })\r\n                if (!hasPermissions) {\r\n                    // 移除掉当前的element\r\n                    el.parentNode && el.parentNode.removeChild(el)\r\n                }\r\n            } else {\r\n                throw new Error(`请设置操作权限标签值`)\r\n            }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}