{"ast":null,"code":"import { onMounted } from \"vue\";\nimport { useRouter } from 'vue-router';\nimport storage from \"@/utils/storage\";\nimport { session } from \"@/constant\";\nimport { toMain } from \"@/api/user\";\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n\n    const getPageName = () => {\n      return new Promise((resolve, reject) => {\n        toMain().then(resp => {\n          console.log(resp.status);\n\n          if (resp.status >= 200 && resp.status < 300) {\n            resolve('main');\n          } else {\n            resolve('login');\n          }\n        }).catch(error => {\n          reject(error);\n          nickName;\n        });\n      });\n    };\n\n    onMounted(() => {\n      if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n        getPageName().then(pageName => {\n          console.log(pageName);\n          router.push({\n            name: pageName\n          });\n        }).catch(() => {\n          router.push({\n            name: 'login'\n          });\n        });\n      } else {\n        router.push({\n          name: 'login'\n        });\n      } // router.push({name: 'login'})\n\n    });\n    const __returned__ = {\n      router,\n      getPageName,\n      onMounted,\n      useRouter,\n      storage,\n      session,\n      toMain\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAKA,SAAQA,SAAR,QAAwB,KAAxB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,SAAQC,OAAR,QAAsB,YAAtB;AACA,SAAQC,MAAR,QAAqB,YAArB;;;;;;AAEA,UAAMC,MAAM,GAAGJ,SAAS,EAAxB;;AAEA,UAAMK,WAAW,GAAG,MAAM;AACxB,aAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCL,cAAM,GAAGM,IAAT,CAAcC,IAAI,IAAI;AACpBC,iBAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,MAAjB;;AACA,cAAIH,IAAI,CAACG,MAAL,IAAe,GAAf,IAAsBH,IAAI,CAACG,MAAL,GAAc,GAAxC,EAA6C;AAC3CN,mBAAO,CAAC,MAAD,CAAP;AACD,WAFD,MAEO;AACLA,mBAAO,CAAC,OAAD,CAAP;AACD;AACF,SAPD,EAOGO,KAPH,CAOSC,KAAK,IAAI;AAChBP,gBAAM,CAACO,KAAD,CAAN;AACAC,kBAAQ;AACT,SAVD;AAWD,OAZM,CAAP;AAaD,KAdD;;AAgBAjB,aAAS,CAAC,MAAM;AACd,UAAIE,OAAO,CAACgB,iBAAR,CAA0Bf,OAAO,CAACgB,gBAAlC,CAAJ,EAAyD;AACvDb,mBAAW,GAAGI,IAAd,CAAmBU,QAAQ,IAAI;AAC7BR,iBAAO,CAACC,GAAR,CAAYO,QAAZ;AACAf,gBAAM,CAACgB,IAAP,CAAY;AAACC,gBAAI,EAAEF;AAAP,WAAZ;AACD,SAHD,EAGGL,KAHH,CAGS,MAAM;AACbV,gBAAM,CAACgB,IAAP,CAAY;AAACC,gBAAI,EAAE;AAAP,WAAZ;AACD,SALD;AAMD,OAPD,MAOO;AACLjB,cAAM,CAACgB,IAAP,CAAY;AAACC,cAAI,EAAE;AAAP,SAAZ;AACD,OAVa,CAWd;;AACD,KAZQ,CAAT","names":["onMounted","useRouter","storage","session","toMain","router","getPageName","Promise","resolve","reject","then","resp","console","log","status","catch","error","nickName","sessionKeyIsEmpty","SESSION_USER_TAG","pageName","push","name"],"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/App.vue"],"sourcesContent":["<template>\n  <router-view></router-view>\n</template>\n\n<script setup>\nimport {onMounted} from \"vue\";\nimport {useRouter} from 'vue-router'\nimport storage from \"@/utils/storage\";\nimport {session} from \"@/constant\";\nimport {toMain} from \"@/api/user\";\n\nconst router = useRouter();\n\nconst getPageName = () => {\n  return new Promise((resolve, reject) => {\n    toMain().then(resp => {\n      console.log(resp.status)\n      if (resp.status >= 200 && resp.status < 300) {\n        resolve('main')\n      } else {\n        resolve('login')\n      }\n    }).catch(error => {\n      reject(error)\n      nickName\n    })\n  })\n}\n\nonMounted(() => {\n  if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n    getPageName().then(pageName => {\n      console.log(pageName)\n      router.push({name: pageName})\n    }).catch(() => {\n      router.push({name: 'login'})\n    })\n  } else {\n    router.push({name: 'login'})\n  }\n  // router.push({name: 'login'})\n})\n\n</script>\n\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}