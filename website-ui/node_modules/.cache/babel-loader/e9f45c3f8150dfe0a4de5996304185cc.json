{"ast":null,"code":"import { ElMessage } from 'element-plus';\nimport { actions } from \"@/constant\";\nimport { getUserInfo, getUserById } from \"@/api/user\";\nexport default {\n  data() {\n    return {\n      user: {\n        userName: \"ydl_admin\",\n        password: \"123456\"\n      },\n      rules: {\n        userName: [{\n          required: true,\n          message: '用户名不能为空',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 15,\n          message: '用户名长度需要在5-15之间',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    doLogin: function () {\n      this.$refs.user.validate(valid => {\n        if (valid) {\n          this.$store.dispatch(actions.LOGIN, this.user).then(resp => {\n            if (resp.status === 200) {\n              this.$store.dispatch(actions.GET_USER_INFO).then(resp => {\n                this.$router.push({\n                  name: 'main'\n                });\n              });\n              ElMessage({\n                message: `欢迎您，${resp.data.user.userName}`,\n                type: 'success'\n              });\n            }\n          }).catch(() => {\n            ElMessage.error('请检查用户名或密码是否错误!');\n          });\n        } else {\n          ElMessage({\n            message: '用户名或密码不符合要求!',\n            type: 'warning'\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA4CA,SAAQA,SAAR,QAAwB,cAAxB;AACA,SAAQC,OAAR,QAAsB,YAAtB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,YAAvC;AAEA,eAAe;AACbC,MAAI,GAAG;AACL,WAAO;AACLC,UAAI,EAAE;AACJC,gBAAQ,EAAE,WADN;AAEJC,gBAAQ,EAAE;AAFN,OADD;AAKLC,WAAK,EAAE;AACLF,gBAAQ,EAAE,CACR;AACEG,kBAAQ,EAAE,IADZ;AAEEC,iBAAO,EAAE,SAFX;AAGEC,iBAAO,EAAE;AAHX,SADQ,EAMR;AACEC,aAAG,EAAE,CADP;AAEEC,aAAG,EAAE,EAFP;AAGEH,iBAAO,EAAE,gBAHX;AAIEC,iBAAO,EAAE;AAJX,SANQ,CADL;AAcLJ,gBAAQ,EAAE,CACR;AACEE,kBAAQ,EAAE,IADZ;AAEEC,iBAAO,EAAE,QAFX;AAGEC,iBAAO,EAAE;AAHX,SADQ;AAdL;AALF,KAAP;AA4BD,GA9BY;;AA+BbG,SAAO,EAAE;AACPC,WAAO,EAAE,YAAY;AACnB,WAAKC,KAAL,CAAWX,IAAX,CAAgBY,QAAhB,CAAyBC,KAAI,IAAK;AAChC,YAAIA,KAAJ,EAAW;AACT,eAAKC,MAAL,CAAYC,QAAZ,CAAqBnB,OAAO,CAACoB,KAA7B,EAAoC,KAAKhB,IAAzC,EAA+CiB,IAA/C,CAAoDC,IAAG,IAAK;AAC1D,gBAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvB,mBAAKL,MAAL,CAAYC,QAAZ,CAAqBnB,OAAO,CAACwB,aAA7B,EAA4CH,IAA5C,CAAiDC,IAAG,IAAK;AACvD,qBAAKG,OAAL,CAAaC,IAAb,CAAkB;AAACC,sBAAI,EAAE;AAAP,iBAAlB;AACD,eAFD;AAIA5B,uBAAS,CAAC;AACRU,uBAAO,EAAG,OAAMa,IAAI,CAACnB,IAAL,CAAUC,IAAV,CAAeC,QAAS,EADhC;AAERuB,oBAAI,EAAE;AAFE,eAAD,CAAT;AAIF;AACD,WAXD,EAWGC,KAXH,CAWS,MAAM;AACb9B,qBAAS,CAAC+B,KAAV,CAAgB,gBAAhB;AACD,WAbD;AAcF,SAfA,MAeO;AACL/B,mBAAS,CAAC;AACRU,mBAAO,EAAE,cADD;AAERmB,gBAAI,EAAE;AAFE,WAAD,CAAT;AAIF;AACD,OAtBD;AAuBF;AAzBO;AA/BI,CAAf","names":["ElMessage","actions","getUserInfo","getUserById","data","user","userName","password","rules","required","message","trigger","min","max","methods","doLogin","$refs","validate","valid","$store","dispatch","LOGIN","then","resp","status","GET_USER_INFO","$router","push","name","type","catch","error"],"sourceRoot":"","sources":["E:\\学习\\项目\\元动力ssm小项目\\website-ui\\src\\components\\login\\index.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-aside width=\"790px\"\r\n    >\r\n      <el-image\r\n          fit=\"fill\"\r\n          :src=\"require('@/assets/image/login_left.jpg')\"\r\n      ></el-image\r\n      >\r\n    </el-aside>\r\n    <el-main>\r\n      <el-card class=\"box-card login-card\">\r\n        <span class=\"login-title\">元动力后台管理系统</span>\r\n        <span class=\"login-tip\">welcome 欢迎登陆</span>\r\n        <el-form\r\n            ref=\"user\"\r\n            :model=\"user\"\r\n            :rules=\"rules\"\r\n            label-width=\"80px\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"userName\">\r\n            <el-input\r\n                v-model=\"user.userName\"\r\n                placeholder=\"请输入用户\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input\r\n                v-model=\"user.password\"\r\n                type=\"password\"\r\n                placeholder=\"请输入密码\"\r\n                show-password\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"doLogin\">登陆</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {ElMessage} from 'element-plus'\r\nimport {actions} from \"@/constant\";\r\nimport {getUserInfo, getUserById} from \"@/api/user\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        userName: \"ydl_admin\",\r\n        password: \"123456\"\r\n      },\r\n      rules: {\r\n        userName: [\r\n          {\r\n            required: true,\r\n            message: '用户名不能为空',\r\n            trigger: 'blur'\r\n          },\r\n          {\r\n            min: 5,\r\n            max: 15,\r\n            message: '用户名长度需要在5-15之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: '密码不能为空',\r\n            trigger: 'blur',\r\n          },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    doLogin: function () {\r\n      this.$refs.user.validate(valid => {\r\n        if (valid) {\r\n          this.$store.dispatch(actions.LOGIN, this.user).then(resp => {\r\n            if (resp.status === 200) {\r\n              this.$store.dispatch(actions.GET_USER_INFO).then(resp => {\r\n                this.$router.push({name: 'main'})\r\n              })\r\n\r\n              ElMessage({\r\n                message: `欢迎您，${resp.data.user.userName}`,\r\n                type: 'success',\r\n              })\r\n            }\r\n          }).catch(() => {\r\n            ElMessage.error('请检查用户名或密码是否错误!')\r\n          })\r\n        } else {\r\n          ElMessage({\r\n            message: '用户名或密码不符合要求!',\r\n            type: 'warning',\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-image {\r\n  height: 885px;\r\n  width: 750px;\r\n}\r\n\r\n.el-main {\r\n  position: relative;\r\n}\r\n\r\n.login-card {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  width: 480px;\r\n  height: 400px;\r\n  padding: 50px;\r\n}\r\n\r\n.login-title {\r\n  width: 459px;\r\n  height: 70px;\r\n  font-size: 40px;\r\n  font-family: AlibabaPuHuiTiB;\r\n  color: #333333;\r\n  line-height: 90px;\r\n  letter-spacing: 1px;\r\n  font-weight: 800;\r\n  display: block;\r\n  text-align: left;\r\n}\r\n\r\n.login-tip {\r\n  width: 319px;\r\n  height: 70px;\r\n  font-size: 30px;\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-weight: 400;\r\n  color: #999999;\r\n  line-height: 90px;\r\n  letter-spacing: 1px;\r\n  display: block;\r\n  text-align: left;\r\n  margin-bottom: 30px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}