{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport store from \"@/store\";\nexport default {\n  hasRole: {\n    mounted(el, binding) {\n      const {\n        value\n      } = binding;\n      const roles = store.getters && store.getters.roles;\n\n      if (value && value instanceof Array && value.length > 0) {\n        const hasPermissions = roles.some(permission => {\n          return value.includes(permission);\n        });\n\n        if (!hasPermissions) {\n          // 移除掉当前的element\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else {\n        throw new Error(`请设置操作权限标签值`);\n      }\n    }\n\n  },\n  hasPermission: {\n    mounted(el, binding) {\n      const {\n        value\n      } = binding;\n      const all_permission = \"*:*:*\";\n      const permissions = store.getters && store.getters.permissions;\n\n      if (value && value instanceof Array && value.length > 0) {\n        const hasPermissions = permissions.some(permission => {\n          return all_permission === permission || value.includes(permission);\n        });\n\n        if (!hasPermissions) {\n          // 移除掉当前的element\n          el.parentNode && el.parentNode.removeChild(el);\n        }\n      } else {\n        throw new Error(`请设置操作权限标签值`);\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/directive/index.js"],"names":["store","hasRole","mounted","el","binding","value","roles","getters","Array","length","hasPermissions","some","permission","includes","parentNode","removeChild","Error","hasPermission","all_permission","permissions"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACXC,EAAAA,OAAO,EAAE;AACLC,IAAAA,OAAO,CAACC,EAAD,EAAKC,OAAL,EAAc;AACjB,YAAM;AAACC,QAAAA;AAAD,UAAUD,OAAhB;AACA,YAAME,KAAK,GAAGN,KAAK,CAACO,OAAN,IAAiBP,KAAK,CAACO,OAAN,CAAcD,KAA7C;;AACA,UAAID,KAAK,IAAIA,KAAK,YAAYG,KAA1B,IAAmCH,KAAK,CAACI,MAAN,GAAe,CAAtD,EAAyD;AACrD,cAAMC,cAAc,GAAGJ,KAAK,CAACK,IAAN,CAAWC,UAAU,IAAI;AAC5C,iBAAOP,KAAK,CAACQ,QAAN,CAAeD,UAAf,CAAP;AACH,SAFsB,CAAvB;;AAGA,YAAI,CAACF,cAAL,EAAqB;AACjB;AACAP,UAAAA,EAAE,CAACW,UAAH,IAAiBX,EAAE,CAACW,UAAH,CAAcC,WAAd,CAA0BZ,EAA1B,CAAjB;AACH;AACJ,OARD,MAQO;AACH,cAAM,IAAIa,KAAJ,CAAW,YAAX,CAAN;AACH;AACJ;;AAfI,GADE;AAkBXC,EAAAA,aAAa,EAAE;AACXf,IAAAA,OAAO,CAACC,EAAD,EAAKC,OAAL,EAAc;AACjB,YAAM;AAACC,QAAAA;AAAD,UAAUD,OAAhB;AACA,YAAMc,cAAc,GAAG,OAAvB;AACA,YAAMC,WAAW,GAAGnB,KAAK,CAACO,OAAN,IAAiBP,KAAK,CAACO,OAAN,CAAcY,WAAnD;;AACA,UAAId,KAAK,IAAIA,KAAK,YAAYG,KAA1B,IAAmCH,KAAK,CAACI,MAAN,GAAe,CAAtD,EAAyD;AACrD,cAAMC,cAAc,GAAGS,WAAW,CAACR,IAAZ,CAAiBC,UAAU,IAAI;AAClD,iBAAOM,cAAc,KAAKN,UAAnB,IAAiCP,KAAK,CAACQ,QAAN,CAAeD,UAAf,CAAxC;AACH,SAFsB,CAAvB;;AAGA,YAAI,CAACF,cAAL,EAAqB;AACjB;AACAP,UAAAA,EAAE,CAACW,UAAH,IAAiBX,EAAE,CAACW,UAAH,CAAcC,WAAd,CAA0BZ,EAA1B,CAAjB;AACH;AACJ,OARD,MAQO;AACH,cAAM,IAAIa,KAAJ,CAAW,YAAX,CAAN;AACH;AACJ;;AAhBU;AAlBJ,CAAf","sourcesContent":["import store from \"@/store\";\r\n\r\nexport default {\r\n    hasRole: {\r\n        mounted(el, binding) {\r\n            const {value} = binding\r\n            const roles = store.getters && store.getters.roles\r\n            if (value && value instanceof Array && value.length > 0) {\r\n                const hasPermissions = roles.some(permission => {\r\n                    return value.includes(permission)\r\n                })\r\n                if (!hasPermissions) {\r\n                    // 移除掉当前的element\r\n                    el.parentNode && el.parentNode.removeChild(el)\r\n                }\r\n            } else {\r\n                throw new Error(`请设置操作权限标签值`)\r\n            }\r\n        }\r\n    },\r\n    hasPermission: {\r\n        mounted(el, binding) {\r\n            const {value} = binding\r\n            const all_permission = \"*:*:*\";\r\n            const permissions = store.getters && store.getters.permissions\r\n            if (value && value instanceof Array && value.length > 0) {\r\n                const hasPermissions = permissions.some(permission => {\r\n                    return all_permission === permission || value.includes(permission)\r\n                })\r\n                if (!hasPermissions) {\r\n                    // 移除掉当前的element\r\n                    el.parentNode && el.parentNode.removeChild(el)\r\n                }\r\n            } else {\r\n                throw new Error(`请设置操作权限标签值`)\r\n            }\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}