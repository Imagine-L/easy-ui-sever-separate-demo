{"ast":null,"code":"import { onMounted } from \"vue\";\nimport { useRouter } from 'vue-router';\nimport storage from \"@/utils/storage\";\nimport { session } from \"@/constant\";\nimport { toMain } from \"@/api/user\";\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n\n    const getPageName = async () => {\n      return new Promise((resolve, reject) => {\n        toMain().then(resp => {\n          if (resp.status >= 200 && resp < 300) {\n            resolve('main');\n          } else {\n            resolve('login');\n          }\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    };\n\n    onMounted(() => {\n      if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n        getPageName().then(pageName => {\n          router.push({\n            name: pageName\n          });\n        }).catch(() => {\n          router.push({\n            name: 'login'\n          });\n        });\n      } else {\n        router.push({\n          name: 'login'\n        });\n      }\n    });\n    const __returned__ = {\n      router,\n      getPageName,\n      onMounted,\n      useRouter,\n      storage,\n      session,\n      toMain\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAKA,SAAQA,SAAR,QAAwB,KAAxB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,SAAQC,OAAR,QAAsB,YAAtB;AACA,SAAQC,MAAR,QAAqB,YAArB;;;;;;AAEA,UAAMC,MAAM,GAAGJ,SAAS,EAAxB;;AAEA,UAAMK,WAAW,GAAG,YAAY;AAC9B,aAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCL,cAAM,GAAGM,IAAT,CAAcC,IAAI,IAAI;AACpB,cAAIA,IAAI,CAACC,MAAL,IAAe,GAAf,IAAsBD,IAAI,GAAG,GAAjC,EAAsC;AACpCH,mBAAO,CAAC,MAAD,CAAP;AACD,WAFD,MAEO;AACLA,mBAAO,CAAC,OAAD,CAAP;AACD;AACF,SAND,EAMGK,KANH,CAMSC,KAAK,IAAI;AAChBL,gBAAM,CAACK,KAAD,CAAN;AACD,SARD;AASD,OAVM,CAAP;AAYD,KAbD;;AAeAd,aAAS,CAAC,MAAM;AACd,UAAIE,OAAO,CAACa,iBAAR,CAA0BZ,OAAO,CAACa,gBAAlC,CAAJ,EAAyD;AACvDV,mBAAW,GAAGI,IAAd,CAAmBO,QAAQ,IAAI;AAC7BZ,gBAAM,CAACa,IAAP,CAAY;AAACC,gBAAI,EAAEF;AAAP,WAAZ;AACD,SAFD,EAEGJ,KAFH,CAES,MAAM;AACbR,gBAAM,CAACa,IAAP,CAAY;AAACC,gBAAI,EAAE;AAAP,WAAZ;AACD,SAJD;AAKD,OAND,MAMO;AACLd,cAAM,CAACa,IAAP,CAAY;AAACC,cAAI,EAAE;AAAP,SAAZ;AACD;AACF,KAVQ,CAAT","names":["onMounted","useRouter","storage","session","toMain","router","getPageName","Promise","resolve","reject","then","resp","status","catch","error","sessionKeyIsEmpty","SESSION_USER_TAG","pageName","push","name"],"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/App.vue"],"sourcesContent":["<template>\n  <router-view></router-view>\n</template>\n\n<script setup>\nimport {onMounted} from \"vue\";\nimport {useRouter} from 'vue-router'\nimport storage from \"@/utils/storage\";\nimport {session} from \"@/constant\";\nimport {toMain} from \"@/api/user\";\n\nconst router = useRouter();\n\nconst getPageName = async () => {\n  return new Promise((resolve, reject) => {\n    toMain().then(resp => {\n      if (resp.status >= 200 && resp < 300) {\n        resolve('main')\n      } else {\n        resolve('login')\n      }\n    }).catch(error => {\n      reject(error)\n    })\n  })\n\n}\n\nonMounted(() => {\n  if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n    getPageName().then(pageName => {\n      router.push({name: pageName})\n    }).catch(() => {\n      router.push({name: 'login'})\n    })\n  } else {\n    router.push({name: 'login'})\n  }\n})\n\n</script>\n\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}