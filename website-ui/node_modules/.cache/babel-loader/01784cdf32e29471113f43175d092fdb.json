{"ast":null,"code":"import { onMounted } from \"vue\";\nimport { useRouter } from 'vue-router';\nimport storage from \"@/utils/storage\";\nimport { session } from \"@/constant\"; // import {toMain} from \"@/api/user\";\n\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const router = useRouter();\n\n    const getPageName = () => {\n      return new Promise((resolve, reject) => {\n        toMain().then(resp => {\n          console.log(resp);\n\n          if (resp.status >= 200 && resp < 300) {\n            resolve('main');\n          } else {\n            resolve('login');\n          }\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    };\n\n    onMounted(() => {\n      if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n        getPageName().then(pageName => {\n          router.push({\n            name: pageName\n          });\n        }).catch(() => {\n          router.push({\n            name: 'login'\n          });\n        });\n      } else {\n        router.push({\n          name: 'login'\n        });\n      }\n\n      router.push({\n        name: 'login'\n      });\n    });\n    const __returned__ = {\n      router,\n      getPageName,\n      onMounted,\n      useRouter,\n      storage,\n      session\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAKA,SAAQA,SAAR,QAAwB,KAAxB;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,SAAQC,OAAR,QAAsB,YAAtB,C,CACA;;;;;;;AAEA,UAAMC,MAAM,GAAGH,SAAS,EAAxB;;AAEA,UAAMI,WAAW,GAAG,MAAM;AACxB,aAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCC,cAAM,GAAGC,IAAT,CAAcC,IAAI,IAAI;AACpBC,iBAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,cAAIA,IAAI,CAACG,MAAL,IAAe,GAAf,IAAsBH,IAAI,GAAG,GAAjC,EAAsC;AACpCJ,mBAAO,CAAC,MAAD,CAAP;AACD,WAFD,MAEO;AACLA,mBAAO,CAAC,OAAD,CAAP;AACD;AACF,SAPD,EAOGQ,KAPH,CAOSC,KAAK,IAAI;AAChBR,gBAAM,CAACQ,KAAD,CAAN;AACD,SATD;AAUD,OAXM,CAAP;AAYD,KAbD;;AAeAhB,aAAS,CAAC,MAAM;AACd,UAAIE,OAAO,CAACe,iBAAR,CAA0Bd,OAAO,CAACe,gBAAlC,CAAJ,EAAyD;AACvDb,mBAAW,GAAGK,IAAd,CAAmBS,QAAQ,IAAI;AAC7Bf,gBAAM,CAACgB,IAAP,CAAY;AAACC,gBAAI,EAAEF;AAAP,WAAZ;AACD,SAFD,EAEGJ,KAFH,CAES,MAAM;AACbX,gBAAM,CAACgB,IAAP,CAAY;AAACC,gBAAI,EAAE;AAAP,WAAZ;AACD,SAJD;AAKD,OAND,MAMO;AACLjB,cAAM,CAACgB,IAAP,CAAY;AAACC,cAAI,EAAE;AAAP,SAAZ;AACD;;AACDjB,YAAM,CAACgB,IAAP,CAAY;AAACC,YAAI,EAAE;AAAP,OAAZ;AACD,KAXQ,CAAT","names":["onMounted","useRouter","storage","session","router","getPageName","Promise","resolve","reject","toMain","then","resp","console","log","status","catch","error","sessionKeyIsEmpty","SESSION_USER_TAG","pageName","push","name"],"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/App.vue"],"sourcesContent":["<template>\n  <router-view></router-view>\n</template>\n\n<script setup>\nimport {onMounted} from \"vue\";\nimport {useRouter} from 'vue-router'\nimport storage from \"@/utils/storage\";\nimport {session} from \"@/constant\";\n// import {toMain} from \"@/api/user\";\n\nconst router = useRouter();\n\nconst getPageName = () => {\n  return new Promise((resolve, reject) => {\n    toMain().then(resp => {\n      console.log(resp)\n      if (resp.status >= 200 && resp < 300) {\n        resolve('main')\n      } else {\n        resolve('login')\n      }\n    }).catch(error => {\n      reject(error)\n    })\n  })\n}\n\nonMounted(() => {\n  if (storage.sessionKeyIsEmpty(session.SESSION_USER_TAG)) {\n    getPageName().then(pageName => {\n      router.push({name: pageName})\n    }).catch(() => {\n      router.push({name: 'login'})\n    })\n  } else {\n    router.push({name: 'login'})\n  }\n  router.push({name: 'login'})\n})\n\n</script>\n\n<style>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}