{"ast":null,"code":"import axios from \"axios\";\nimport store from '@/store';\nimport { session } from \"@/constant\";\nimport storage from \"@/utils/storage\"; // 创建 axios 实例\n\nconst request = axios.create({\n  // 请求url的公共部分\n  baseURL: '/admin',\n  // 超时时间\n  timeout: 1000,\n  // 设置 `content-type` ，规定前后端json格式通信\n  headers: {\n    'Content-Type': 'application/json;charset=UTF-8'\n  }\n});\nrequest.interceptors.request.use(config => {\n  //store.state.user.token\n  let loginUser = storage.getSessionObject(session.SESSION_USER_TAG);\n\n  if (loginUser != null) {\n    // 如果用户含有token，则每次请求携带token\n    config.headers['Authorization'] = loginUser.token;\n  }\n\n  return config;\n}, error => {\n  // 对请求错误做写什么\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"sources":["E:/学习/项目/元动力ssm小项目/website-ui/src/api/index.js"],"names":["axios","store","session","storage","request","create","baseURL","timeout","headers","interceptors","use","config","loginUser","getSessionObject","SESSION_USER_TAG","token","error","Promise","reject"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAAQC,OAAR,QAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,iBAApB,C,CAEA;;AACA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AACzB;AACAC,EAAAA,OAAO,EAAE,QAFgB;AAGzB;AACAC,EAAAA,OAAO,EAAE,IAJgB;AAKzB;AACAC,EAAAA,OAAO,EAAE;AAAC,oBAAgB;AAAjB;AANgB,CAAb,CAAhB;AASAJ,OAAO,CAACK,YAAR,CAAqBL,OAArB,CAA6BM,GAA7B,CAAiCC,MAAM,IAAI;AACvC;AACA,MAAIC,SAAS,GAAGT,OAAO,CAACU,gBAAR,CAAyBX,OAAO,CAACY,gBAAjC,CAAhB;;AACA,MAAIF,SAAS,IAAI,IAAjB,EAAuB;AACnB;AACAD,IAAAA,MAAM,CAACH,OAAP,CAAe,eAAf,IAAkCI,SAAS,CAACG,KAA5C;AACH;;AACD,SAAOJ,MAAP;AACH,CARD,EAQGK,KAAK,IAAI;AACR;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAXD;AAaA,eAAeZ,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport store from '@/store'\r\nimport {session} from \"@/constant\";\r\nimport storage from \"@/utils/storage\";\r\n\r\n// 创建 axios 实例\r\nconst request = axios.create({\r\n    // 请求url的公共部分\r\n    baseURL: '/admin',\r\n    // 超时时间\r\n    timeout: 1000,\r\n    // 设置 `content-type` ，规定前后端json格式通信\r\n    headers: {'Content-Type': 'application/json;charset=UTF-8'}\r\n})\r\n\r\nrequest.interceptors.request.use(config => {\r\n    //store.state.user.token\r\n    let loginUser = storage.getSessionObject(session.SESSION_USER_TAG)\r\n    if (loginUser != null) {\r\n        // 如果用户含有token，则每次请求携带token\r\n        config.headers['Authorization'] = loginUser.token\r\n    }\r\n    return config\r\n}, error => {\r\n    // 对请求错误做写什么\r\n    return Promise.reject(error)\r\n})\r\n\r\nexport default request"]},"metadata":{},"sourceType":"module"}